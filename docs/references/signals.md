Hypha uses django signals to enable extensions to modify behavior, as well as execute their own code when certain things happen in hypha.  This page servers as a reference to implemented signals in hypha.

#### hypha.apply.activity.signals.message_hook

Gives a chance to override messages that go out from hypha, and whether those messages should go out.

Function definition to receive signal:

```
@receiver(message_hook, sender=sender)
def handle_message_hook(sender, message_type, **kwargs)
```

With the following parameters:

* `sender`: one of the adapters defined in `hypha/apply/activity/messaging.py`, such as EmailAdapter
* `message_type`: one of the `MESSAGES` defined in `hypha/apply/activity/options.py`
* `kwargs`: all the additional information present for generating the message.  The information changes per call, so should be treated as unreliable.  That said, normally there are a few items available
  * `"request"` - the django request
  * `"source"` - the item that caused the message to be fired, such as the submission, invoice, or project

The response from the hook should be a dictionary including any or all of the following attributes:

* `"should_send"` - A boolean about whether this message should be sent.  If any hook handlers have this set to false, the message will not be sent.
* `"extra_kwargs"` - a dictionary of extra kwargs that are used by the adapters to send.  For instance, "subject" is used by the email adapater for the subject line of the message
* `"message"` - The message that should be sent instead of the one generated by hypha
* `"priority"` - When multiple hooks are fired that define new messages or extra kwargs, the one with the highest priority will be used.  If no priorities are defined, then the first one will be used.

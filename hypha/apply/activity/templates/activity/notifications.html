{% extends "base-apply.html" %}
{% load i18n static activity_tags apply_tags %}

{% block content %}
<div class="admin-bar">
    <div class="admin-bar__inner">
        <div class="admin-bar__inner--with-button">
            <h1 class="gamma heading heading--no-margin heading--bold">{% trans "Notifications" %}</h1>
            <form class="form notification__filters" method="get">
                {{ filter.form.as_p }}
                <button class="button button--primary" type="submit" value="Filter">{% trans "Filter" %}</button>
            </form>
        </div>

        <div class="tabs js-tabs">
            <div class="tabs__container">
                <a class="tab__item" href="#comments" data-tab="tab-1">
                    {% trans "Comments" %}
                </a>

                <a class="tab__item" href="#actions" data-tab="tab-2">
                    {% trans "Actions" %}
                </a>
            </div>
        </div>
    </div>
</div>

<div class="wrapper wrapper--large wrapper--tabs js-tabs-content">
    {# Tab 1 #}
    <div class="tabs__content" id="tab-1">
        {% for activity in object_list %}
            {% if activity.type == 'comment' %}
                <div class="feed__item feed__item--comment">
                    <div class="feed__pre-content">
                        <p class="feed__label feed__label--comment">{{ activity.source_content_type.name|source_type }}</p>
                    </div>
                    <div class="feed__content js-feed-content">
                        <div class="feed__meta js-feed-meta">
                            <p class="feed__meta-item"><a href="{{ activity.source.get_absolute_url }}">{{ activity.source.title|capfirst|truncatechars:15 }}</a>
                                : {{ activity.user }} made a comment – {{ activity.timestamp|date:"SHORT_DATETIME_FORMAT" }}</p>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
    {# Tab 2 #}
    <div class="tabs__content" id="tab-2">
        {% for activity in object_list %}
            {% if activity.type == 'action' %}
                <div class="feed__item feed__item--action">
                    <div class="feed__pre-content">
                        <p class="feed__label feed__label--action">{{ activity.source_content_type.name|source_type }}</p>
                    </div>
                    <div class="feed__content js-feed-content">
                        <div class="feed__meta js-feed-meta">
                            <p class="feed__meta-item"><a href="{{ activity.source.get_absolute_url }}">{{ activity.source.title|capfirst|truncatechars:15 }}</a>
                                    : {{ activity.message }} {% if activity.related_object %}<a href="{{ activity.related_object.get_absolute_url }}">{{ activity.related_object|model_verbose_name }}</a>{% endif %}
                                 – {{ activity.timestamp|date:"SHORT_DATETIME_FORMAT" }}</p>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/apply/tabs.js' %}"></script>
{% endblock %}

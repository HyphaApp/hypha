{% extends "base-apply.html" %}
{% load i18n static activity_tags apply_tags %}

{% block content %}
<div class="admin-bar">
    <div class="admin-bar__inner">
        <h1 class="gamma heading heading--no-margin heading--bold">{% trans "Notifications" %}</h1>
        <div class="tabs js-tabs">
            <div class="tabs__container">
                <a class="tab__item" href="#comments" data-tab="tab-1">
                    {% trans "Comments" %}
                </a>

                <a class="tab__item" href="#actions" data-tab="tab-2">
                    {% trans "Actions" %}
                </a>
            </div>
        </div>
    </div>
</div>

<div class="wrapper wrapper--large wrapper--tabs js-tabs-content">
    {# Tab 1 #}
    <div class="tabs__content" id="tab-1">
<!--        WIP Filters -->
<!--        <div class="filters {% if filter_classes %}{{filter_classes}}{% endif %}">-->
<!--            <div class="filters__header">-->
<!--                <button class="filters__button js-clear-filters">{% trans "Clear" %}</button>-->
<!--                <div>{% trans "Filter by" %}</div>-->
<!--                <button class="filters__button js-close-filters">{% trans "Close" %}</button>-->
<!--            </div>-->

<!--            <form action="{{ filter_action }}" method="get" class="form form&#45;&#45;filters js-filter-form">-->
<!--                <ul class="form__filters select2">-->
<!--                    {{ filter.form.as_ul }}-->
<!--                    <li>-->
<!--                        <button class="button button&#45;&#45;primary" type="submit" value="Filter">{% trans "Filter" %}</button>-->
<!--                    </li>-->
<!--                </ul>-->
<!--            </form>-->
<!--        </div>-->

        {% for comment in comments %}
        <div class="feed__item feed__item--comment">
            <div class="feed__pre-content">
                <p class="feed__label feed__label--comment">{{ comment.source_content_type.name|source_type }}</p>
            </div>
            <div class="feed__content js-feed-content">
                <div class="feed__meta js-feed-meta">
                    <p class="feed__meta-item"><a href="{{ comment.source.get_absolute_url }}">{{ comment.source.title|capfirst|truncatechars:15 }}</a>
                        : {{ comment.user }} made a comment – {{ comment.timestamp|date:"SHORT_DATETIME_FORMAT" }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {# Tab 2 #}
    <div class="tabs__content" id="tab-2">
            {% for action in actions %}
            <div class="feed__item feed__item--action">
                <div class="feed__pre-content">
                    <p class="feed__label feed__label--action">{{ action.source_content_type.name|source_type }}</p>
                </div>
                <div class="feed__content js-feed-content">
                    <div class="feed__meta js-feed-meta">
                        <p class="feed__meta-item"><a href="{{ action.source.get_absolute_url }}">{{ action.source.title|capfirst|truncatechars:15 }}</a>
                                : {{ action.message }} {% if action.related_object %}<a href="{{ action.related_object.get_absolute_url }}">{{ action.related_object|model_verbose_name }}</a>{% endif %}
                             – {{ action.timestamp|date:"SHORT_DATETIME_FORMAT" }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
    </div>
</div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/apply/tabs.js' %}"></script>
{% endblock %}

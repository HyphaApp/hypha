{% extends "base-apply.html" %}
{% load i18n %}
{% block title %}{% blocktrans with title=submission.title %}Revisions for {{ title }}{% endblocktrans %}{% endblock %}

{% block hero %}
    <c-hero>
        <c-hero.header
            title="{% trans 'Revisions' %}"
            subtitle="{% trans 'For' %} <a class='link link-hover' href='{% url 'funds:submissions:detail' submission.id %}'>{{ submission.title_text_display }}</a>"
        />
    </c-hero>
{% endblock %}


{% block content %}
    <div class="my-8 max-w-3xl">
        <h2 class="section-header">Application revisions</h2>

        <ol class="card card-border list">
            {% for revision in object_list %}
                <li class="list-row {% if not forloop.first %}hover:bg-base-200 cursor-pointer{% endif %}" {% if not forloop.first %}onclick="window.location.href='{{ revision.get_compare_url_to_latest }}'"{% endif %}>
                    <p class="self-center list-col-grow">
                        <span class="font-semibold">{{ revision.author }}</span> {% trans "edited" %}

                        <relative-time datetime={{ revision.timestamp|date:"c" }} class="text-fg-muted">
                            {{ revision.timestamp|date:"SHORT_DATETIME_FORMAT" }}
                        </relative-time>

                        {% if revision.is_draft %}
                            <span class="uppercase badge badge-warning badge-outline">
                                ({% trans "draft" %})
                            </span>
                        {% endif %}
                    </p>

                    {% if forloop.first %}
                        <span class="uppercase badge badge-info badge-outline">
                            {% trans "latest" %}
                        </span>
                    {% else %}
                        <a
                            class="btn btn-primary btn-sm"
                            href="{{ revision.get_compare_url_to_latest }}"
                            data-tippy-content="{% trans 'Compare with latest' %}"
                        >
                            {% trans "Compare" %}
                        </a>
                    {% endif %}
                </li>
            {% endfor %}
        </ol>
    </div>
{% endblock %}

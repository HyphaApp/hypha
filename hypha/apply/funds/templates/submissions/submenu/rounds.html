{% load i18n %}
{% load querystrings %}

<div class='flex flex-col'>

    {% if open_rounds or closed_rounds %}

    {% if selected_rounds %}
        <a data-filter-for="round-filter-field"
            href="{% url "apply:submissions:list-beta" %}{% remove_from_query "only_query_string" "page" "round" %}"
            hx-get="{% url "apply:submissions:list-beta" %}{% remove_from_query "only_query_string" "page" "round" %}"
            hx-push-url="true"
            class="flex px-3 py-2 text-gray-600 border-b items-center hover:bg-gray-100 focus:bg-gray-100{% if s.selected %}bg-gray-100{% endif %}">
            {% trans "All Rounds" %}
        </a>
    {% endif %}

    <div
        role="tablist"
        x-data="{tab: 'closed_rounds'}">
        <nav class="flex px-3 pt-2" style="box-shadow: inset 0 -1px 0 #e5e7eb">
            {% if closed_rounds %}
            <span @click="tab = 'closed_rounds'"
                role="tab"
                :class="{ 'border-x border-t border-b-transparent': tab === 'closed_rounds' }"
                class="text-center bg-white inline-block px-4 py-2 border-b rounded-t-lg cursor-pointer hover:text-gray-900">Closed</span>
            {% endif %}
            {% if open_rounds %}
            <span @click="tab = 'open_rounds'"
                role="tab"
                :class="{ 'border-x border-t border-b-transparent': tab === 'open_rounds' }"
                class="text-center bg-white inline-block px-4 py-2 border-b rounded-t-lg round cursor-pointer hover:text-gray-900">Open</span>
            {% endif %}
        </nav>

        {% if closed_rounds %}
        <div class="tab-closed-rounds overflow-scroll max-h-80"
            x-show="tab === 'closed_rounds'"
            role="tabpanel"
        >
            {% for f in closed_rounds %}
                <a data-filter-for="round-filter-field"
                    href="{% url "apply:submissions:list-beta" %}{% modify_query "only_query_string" "page" round=f.id %}"
                    hx-get="{% url "apply:submissions:list-beta" %}{% modify_query "only_query_string" "page" round=f.id %}"
                    hx-push-url="true"
                    class="flex {% if f.selected %}pl-2 font-medium{% else %}pl-8{% endif %} pr-3 py-2 text-gray-600 border-b items-center hover:bg-gray-100 focus:bg-gray-100{% if f.selected %}bg-gray-100{% endif %}">
                    {% if f.selected %}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-2">
                            <path fill-rule="evenodd"
                                d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                clip-rule="evenodd" />
                        </svg>
                    {% endif %}
                    {{ f.title }} <span class="text-gray-300">{% if f.open %}Open{% endif %}</span>
                </a>
            {% endfor %}
        </div>
        {% endif %}

        {% if open_rounds %}
            <div class="tab-open-rounds overflow-scroll max-h-80"
                x-show="tab === 'open_rounds'"
                role="tabpanel"
            >
                {% for f in open_rounds %}
                    <a
                        data-filter-for="round-filter-field"
                        href="{% url "apply:submissions:list-beta" %}{% modify_query "only_query_string" "page" round=f.id %}"
                        hx-get="{% url "apply:submissions:list-beta" %}{% modify_query "only_query_string" "page" round=f.id %}"
                        hx-push-url="true"
                        class="flex {% if f.selected %}pl-2 font-medium{% else %}pl-8{% endif %} pr-3 py-2 text-gray-600 border-b items-center hover:bg-gray-100 focus:bg-gray-100{% if f.selected %}bg-gray-100{% endif %}">
                        {% if f.selected %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-2">
                                <path fill-rule="evenodd"
                                    d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                    clip-rule="evenodd" />
                            </svg>
                        {% endif %}

                        <svg aria-hidden='true' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-2">
                            <path fill-rule="evenodd" d="M14.5 1A4.5 4.5 0 0010 5.5V9H3a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-1.5V5.5a3 3 0 116 0v2.75a.75.75 0 001.5 0V5.5A4.5 4.5 0 0014.5 1z" clip-rule="evenodd" />
                        </svg>

                        {{ f.title }} <span class="text-gray-300">{% if f.open %}Open{% endif %}</span>
                    </a>
                {% endfor %}
            </div>
        {% endif %}
        {% else %}
            <span
                class="flex px-3 py-2 text-gray-600 items-center">
                No rounds available
            </span>
        {% endif %}
    </div>

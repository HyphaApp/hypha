{% extends "base.html" %}
{% load cache wagtailcore_tags wagtailimages_tags static util_tags %}

{% block header %}
    {% image page.header_image fill-1440x740 as header_image %}
    <header class="header header--homepage {% if page.header_image %}header--has-bg-image{% endif %} {% block header_modifier %}{% endblock %}" {% if page.header_image %}style="background-image:url('{{ header_image.url }}')"{% endif %}>

        {% block apply_button %}
            {% include "includes/apply_button.html" %}
        {% endblock %}

        <div class="header__inner wrapper wrapper--large">
            <a href="{{ settings.utils.SystemMessagesSettings.site_logo_link|default:"/" }}" aria-label="Home link">
                {% if settings.utils.SystemMessagesSettings.site_logo_default %}
                    {% image settings.utils.SystemMessagesSettings.site_logo_default width-215 as logo_default %}
                    <img class="header__logo header__logo--desktop" src="{{ logo_default.url }}">
                    {% if settings.utils.SystemMessagesSettings.site_logo_mobile %}
                        {% image settings.utils.SystemMessagesSettings.site_logo_mobile width-60 as logo_mobile %}
                        <img class="header__logo header__logo--mobile" src="{{ logo_mobile.url }}">
                    {% else %}
                        <img class="header__logo header__logo--mobile" src="{{ logo_default.url }}">
                    {% endif %}
                {% else %}
                    <svg class="header__logo header__logo--desktop"><use xlink:href="#logo-desktop--dark-alt"></use></svg>
                    <svg class="header__logo header__logo--mobile"><use xlink:href="#logo-mobile-dark"></use></svg>
                {% endif %}
            </a>

            <div class="header__inner header__inner--mobile-buttons">
                <button class="button button--left-space js-mobile-menu-toggle" aria-haspopup="true">
                    <svg class="icon icon--mobile-menu"><use xlink:href="#mobile-menu-toggle"></use></svg>
                </button>
            </div>

            <section class="header__menus header__menus--mobile">
                <div class="header__inner header__inner--menu-open">
                    <a href="{{ settings.utils.SystemMessagesSettings.site_logo_link|default:"/" }}" aria-label="Home link">
                        {% if settings.utils.SystemMessagesSettings.site_logo_mobile %}
                            {% image settings.utils.SystemMessagesSettings.site_logo_mobile width-60 as logo_mobile %}
                            <img class="header__logo header__logo--mobile" src="{{ logo_mobile.url }}">
                        {% else %}
                            <svg class="header__logo header__logo--mobile"><use xlink:href="#logo-mobile"></use></svg>
                        {% endif %}
                    </a>
                </div>
            </section>

            <div class="header__button-container">
                {% include "utils/includes/login_button.html" %}
                {% if ENABLE_PUBLIC_SIGNUP %}
                    {% include "utils/includes/register_button.html" %}
                {% endif %}
            </div>
        </div>

        <div class="wrapper wrapper--medium wrapper--page-title">
            <h1 class="header__title header__title--homepage">{% block page_title %}{{ page.title }}{% endblock %}</h1>
            <p class="header__strapline">{{ page.strapline }}</p>
        </div>
    </header>
{% endblock %}

{% block content %}

{% endblock %}

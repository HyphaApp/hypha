/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.17.1.
 * Original file: /npm/@github/relative-time-element@4.3.0/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t,e=function(t,e,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,s):n?n.value=s:e.set(t,s),s},s=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)};const i="undefined"!=typeof Intl&&Intl.ListFormat||class{formatToParts(t){const e=[];for(const s of t)e.push({type:"element",value:s}),e.push({type:"literal",value:", "});return e.slice(0,-1)}},n=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],r={minimumIntegerDigits:2};class a{constructor(s,i={}){t.set(this,void 0);let n=String(i.style||"short");"long"!==n&&"short"!==n&&"narrow"!==n&&"digital"!==n&&(n="short");let r="digital"===n?"numeric":n;const a=i.hours||r;r="2-digit"===a?"numeric":a;const o=i.minutes||r;r="2-digit"===o?"numeric":o;const h=i.seconds||r;r="2-digit"===h?"numeric":h;const u=i.milliseconds||r;e(this,t,{locale:s,style:n,years:i.years||"digital"===n?"short":n,yearsDisplay:"always"===i.yearsDisplay?"always":"auto",months:i.months||"digital"===n?"short":n,monthsDisplay:"always"===i.monthsDisplay?"always":"auto",weeks:i.weeks||"digital"===n?"short":n,weeksDisplay:"always"===i.weeksDisplay?"always":"auto",days:i.days||"digital"===n?"short":n,daysDisplay:"always"===i.daysDisplay?"always":"auto",hours:a,hoursDisplay:"always"===i.hoursDisplay||"digital"===n?"always":"auto",minutes:o,minutesDisplay:"always"===i.minutesDisplay||"digital"===n?"always":"auto",seconds:h,secondsDisplay:"always"===i.secondsDisplay||"digital"===n?"always":"auto",milliseconds:u,millisecondsDisplay:"always"===i.millisecondsDisplay?"always":"auto"},"f")}resolvedOptions(){return s(this,t,"f")}formatToParts(e){const a=[],o=s(this,t,"f"),h=o.style,u=o.locale;for(const[t,s]of n){const i=e[t];if("auto"===o[`${t}Display`]&&!i)continue;const n=o[t],h="2-digit"===n?r:"numeric"===n?{}:{style:"unit",unit:s,unitDisplay:n};a.push(new Intl.NumberFormat(u,h).format(i))}return new i(u,{type:"unit",style:"digital"===h?"short":h}).formatToParts(a)}format(t){return this.formatToParts(t).map((t=>t.value)).join("")}}t=new WeakMap;const o=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,h=["year","month","week","day","hour","minute","second","millisecond"];class u{constructor(t=0,e=0,s=0,i=0,n=0,r=0,a=0,o=0){this.years=t,this.months=e,this.weeks=s,this.days=i,this.hours=n,this.minutes=r,this.seconds=a,this.milliseconds=o,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=0===this.sign}abs(){return new u(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if("string"==typeof t){const s=String(t).trim(),i=s.startsWith("-")?-1:1,n=null===(e=s.match(o))||void 0===e?void 0:e.slice(1).map((t=>(Number(t)||0)*i));return n?new u(...n):new u}if("object"==typeof t){const{years:e,months:s,weeks:i,days:n,hours:r,minutes:a,seconds:o,milliseconds:h}=t;return new u(e,s,i,n,r,a,o,h)}throw new RangeError("invalid duration")}static compare(t,e){const s=Date.now(),i=Math.abs(l(s,u.from(t)).getTime()-s),n=Math.abs(l(s,u.from(e)).getTime()-s);return i>n?-1:i<n?1:0}toLocaleString(t,e){return new a(t,e).format(this)}}function l(t,e){const s=new Date(t);return s.setFullYear(s.getFullYear()+e.years),s.setMonth(s.getMonth()+e.months),s.setDate(s.getDate()+7*e.weeks+e.days),s.setHours(s.getHours()+e.hours),s.setMinutes(s.getMinutes()+e.minutes),s.setSeconds(s.getSeconds()+e.seconds),s}function d(t,{relativeTo:e=Date.now()}={}){if(e=new Date(e),t.blank)return t;const s=t.sign;let i=Math.abs(t.years),n=Math.abs(t.months),r=Math.abs(t.weeks),a=Math.abs(t.days),o=Math.abs(t.hours),h=Math.abs(t.minutes),l=Math.abs(t.seconds),d=Math.abs(t.milliseconds);d>=900&&(l+=Math.round(d/1e3)),(l||h||o||a||r||n||i)&&(d=0),l>=55&&(h+=Math.round(l/60)),(h||o||a||r||n||i)&&(l=0),h>=55&&(o+=Math.round(h/60)),(o||a||r||n||i)&&(h=0),a&&o>=12&&(a+=Math.round(o/24)),!a&&o>=21&&(a+=Math.round(o/24)),(a||r||n||i)&&(o=0);const m=e.getFullYear();let c=e.getMonth();const f=e.getDate();return(a>=27||i+n&&a)&&(e.setDate(f+a*s),n+=Math.abs(e.getFullYear()>=m?e.getMonth()-c:e.getMonth()-c-12),n&&(a=0),c=e.getMonth()),a>=6&&(r+=Math.round(a/7)),(r||n||i)&&(a=0),r>=4&&(n+=Math.round(r/4)),(n||i)&&(r=0),(n>=11||i&&n)&&(e.setMonth(e.getMonth()+n*s),i+=Math.abs(m-e.getFullYear())),i&&(n=0),new u(i*s,n*s,r*s,a*s,o*s,h*s,l*s,d*s)}var m,c,f,g,y,w,p,b,v,M,D,T=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)},A=function(t,e,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,s):n?n.value=s:e.set(t,s),s};const k=globalThis.HTMLElement||null,E=new u,x=new u(0,0,0,0,0,1);class S extends Event{constructor(t,e,s,i){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=s,this.newTitle=i}}function C(t){if(!t.date)return 1/0;if("duration"===t.format||"elapsed"===t.format){const e=t.precision;if("second"===e)return 1e3;if("minute"===e)return 6e4}const e=Math.abs(Date.now()-t.date.getTime());return e<6e4?1e3:e<36e5?6e4:36e5}const F=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(t){if(this.elements.has(t))return;this.elements.add(t);const e=t.date;if(e&&e.getTime()){const e=C(t),s=Date.now()+e;s<this.time&&(clearTimeout(this.timer),this.timer=setTimeout((()=>this.update()),e),this.time=s)}}unobserve(t){this.elements.has(t)&&this.elements.delete(t)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let t=1/0;for(const e of this.elements)t=Math.min(t,C(e)),e.update();this.time=Math.min(36e5,t),this.timer=setTimeout((()=>this.update()),this.time),this.time+=Date.now()}};class P extends k{constructor(){super(...arguments),m.add(this),c.set(this,!1),f.set(this,!1),y.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),D.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","datetime","lang","title"]}get onRelativeTimeUpdated(){return T(this,D,"f")}set onRelativeTimeUpdated(t){T(this,D,"f")&&this.removeEventListener("relative-time-updated",T(this,D,"f")),A(this,D,"object"==typeof t||"function"==typeof t?t:null,"f"),"function"==typeof t&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if("numeric"===t||"2-digit"===t)return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if("numeric"===t||"2-digit"===t)return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if("numeric"===t||"2-digit"===t)return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");return"long"===t||"short"===t||"narrow"===t?t:"datetime"===this.format&&""!==t?this.formatStyle:void 0}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=null!==(t=this.getAttribute("day"))&&void 0!==t?t:"numeric";if("numeric"===e||"2-digit"===e)return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(""!==e)return null!=e||(e="datetime"===t?this.formatStyle:"short"),"numeric"===e||"2-digit"===e||"short"===e||"long"===e||"narrow"===e?e:void 0}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");return"numeric"===e||"2-digit"===e?e:this.hasAttribute("year")||(new Date).getUTCFullYear()===(null===(t=this.date)||void 0===t?void 0:t.getUTCFullYear())?void 0:"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if("long"===t||"short"===t||"shortOffset"===t||"longOffset"===t||"shortGeneric"===t||"longGeneric"===t)return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return null!==(t=this.getAttribute("prefix"))&&void 0!==t?t:"datetime"===this.format?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&(e=t,o.test(e))?t:"P30D";var e}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return"past"===t?"past":"future"===t?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return h.includes(t)?t:"micro"===this.format?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return"datetime"===t?"datetime":"relative"===t?"relative":"duration"===t?"duration":"micro"===t?"micro":"elapsed"===t?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if("long"===t)return"long";if("short"===t)return"short";if("narrow"===t)return"narrow";const e=this.format;return"elapsed"===e||"micro"===e?"narrow":"datetime"===e?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=(null==t?void 0:t.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){F.unobserve(this)}attributeChangedCallback(t,e,s){e!==s&&("title"===t&&A(this,c,null!==s&&(this.date&&T(this,m,"m",w).call(this,this.date))!==s,"f"),T(this,f,"f")||"title"===t&&T(this,c,"f")||A(this,f,(async()=>{await Promise.resolve(),this.update()})(),"f"))}update(){const t=T(this,y,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let s=e;const i=this.date;if("undefined"==typeof Intl||!Intl.DateTimeFormat||!i)return void(T(this,y,"f").textContent=t);const n=Date.now();T(this,c,"f")||(s=T(this,m,"m",w).call(this,i)||"",s&&this.setAttribute("title",s));const r=function(t,e="second",s=Date.now()){const i=t.getTime()-s;if(0===i)return new u;const n=Math.sign(i),r=Math.abs(i),a=Math.floor(r/1e3),o=Math.floor(a/60),l=Math.floor(o/60),d=Math.floor(l/24),m=Math.floor(d/30),c=Math.floor(m/12),f=h.indexOf(e)||h.length;return new u(f>=0?c*n:0,f>=1?(m-12*c)*n:0,0,f>=3?(d-30*m)*n:0,f>=4?(l-24*d)*n:0,f>=5?(o-60*l)*n:0,f>=6?(a-60*o)*n:0,f>=7?(r-1e3*a)*n:0)}(i,this.precision,n),a=T(this,m,"m",p).call(this,r);let o=t;o="duration"===a?T(this,m,"m",b).call(this,r):"relative"===a?T(this,m,"m",v).call(this,r):T(this,m,"m",M).call(this,i),o?T(this,y,"f").textContent=o:this.shadowRoot===T(this,y,"f")&&this.textContent&&(T(this,y,"f").textContent=this.textContent),o===t&&s===e||this.dispatchEvent(new S(t,o,e,s)),"relative"===a||"duration"===a?F.observe(this):F.unobserve(this),A(this,f,!1,"f")}}c=new WeakMap,f=new WeakMap,y=new WeakMap,D=new WeakMap,m=new WeakSet,g=function(){var t;return(null===(t=this.closest("[lang]"))||void 0===t?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang")||"default"},w=function(t){return new Intl.DateTimeFormat(T(this,m,"a",g),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}).format(t)},p=function(t){const e=this.format;if("datetime"===e)return"datetime";if("duration"===e)return"duration";if("elapsed"===e)return"duration";if("micro"===e)return"duration";if(("auto"===e||"relative"===e)&&"undefined"!=typeof Intl&&Intl.RelativeTimeFormat){const e=this.tense;if("past"===e||"future"===e)return"relative";if(1===u.compare(t,this.threshold))return"relative"}return"datetime"},b=function(t){const e=T(this,m,"a",g),s=this.format,i=this.formatStyle,n=this.tense;let r=E;"micro"===s?(t=d(t),r=x,("past"===this.tense&&-1!==t.sign||"future"===this.tense&&1!==t.sign)&&(t=x)):("past"===n&&-1!==t.sign||"future"===n&&1!==t.sign)&&(t=r);const a=`${this.precision}sDisplay`;return t.blank?r.toLocaleString(e,{style:i,[a]:"always"}):t.abs().toLocaleString(e,{style:i})},v=function(t){const e=new Intl.RelativeTimeFormat(T(this,m,"a",g),{numeric:"auto",style:this.formatStyle}),s=this.tense;"future"===s&&1!==t.sign&&(t=E),"past"===s&&-1!==t.sign&&(t=E);const[i,n]=function(t,e){const s=d(t,e);if(s.blank)return[0,"second"];for(const t of h){if("millisecond"===t)continue;const e=s[`${t}s`];if(e)return[e,t]}return[0,"second"]}(t);return"second"===n&&i<10?e.format(0,"second"):e.format(i,n)},M=function(t){const e=new Intl.DateTimeFormat(T(this,m,"a",g),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName});return`${this.prefix} ${e.format(t)}`.trim()};const I="undefined"!=typeof globalThis?globalThis:window;try{I.RelativeTimeElement=P.define()}catch(t){if(!(I.DOMException&&t instanceof DOMException&&"NotSupportedError"===t.name||t instanceof ReferenceError))throw t}export{P as RelativeTimeElement,S as RelativeTimeUpdatedEvent,P as default};

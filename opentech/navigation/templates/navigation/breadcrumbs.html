{% load wagtailcore_tags %}

{% if page.get_ancestors|length > 2 %}
    <nav role="navigation" aria-label="breadcrumb">
        <ul class="nav nav--breadcrumb">
            {% for ancestor_page in page.get_ancestors %}
                {% if not ancestor_page.is_root %}
                    {% if ancestor_page.depth > 2 %}
                        <li class="nav__item nav__item--breadcrumb">
                            <a class="nav__link nav__link--breadcrumb" href="{% pageurl ancestor_page %}" title="{{ ancestor_page.title }}">{{ ancestor_page.title }}</a>
                        </li>
                    {% else %}
                        <li class="nav__item nav__item--breadcrumb">
                            <a class="nav__link nav__link--breadcrumb" href="{% slugurl 'home' %}" title="Home">
                                <svg class="icon icon--home"><use xlink:href="#home"></use></svg>
                                Home
                            </a>
                        </li>
                    {% endif %}
                {% endif %}
            {% endfor %}
            <li class="nav__item nav__item--breadcrumb">{{ page.title }}</li>
        </ul>
    </nav>
{% endif %}
